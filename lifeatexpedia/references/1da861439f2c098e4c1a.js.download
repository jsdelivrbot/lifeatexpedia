webpackJsonp(["es5/footer-email-registration"],{"/GRh":function(e,t,i){"use strict";var n=i("9/Ou"),r=i("14uT"),s=i("59kc"),o=i("NOM9"),a=n.CompositeView.extend({events:{submit:"submitRegistration"},submitRegistration:function(e){e.preventDefault(),r.submitRegistration(this.$el.attr("action"),this.$el.serialize(),this.$el.data("feature-type"))},subviews:{".js_email_registration_error":s.a,".js_email_registration_input":o.a}});t.a=a},"14uT":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"proceedToTrivago",function(){return r}),i.d(t,"submitRegistration",function(){return s}),i.d(t,"userInteraction",function(){return o}),i.d(t,"removeErrorMessage",function(){return a}),i.d(t,"emailRegistered",function(){return u}),i.d(t,"featureClosed",function(){return l});var n=i("9/Ou"),r=Object(n.createAction)(),s=Object(n.createAction)(),o=Object(n.createAction)(),a=Object(n.createAction)(),u=Object(n.createAction)(),l=Object(n.createAction)()},"59kc":function(e,t,i){"use strict";var n=i("9/Ou"),r=n.CompositeView.extend({modelEvents:{"change:registrationErrors":"update"},render:function(){this.model.attributes.registrationErrors.length>0?(this.$el.removeClass("is-hidden"),this.$el.text(this.model.attributes.registrationErrors)):(this.$el.addClass("is-hidden"),this.$el.text(""))}});t.a=r},Ct3g:function(e,t,i){"use strict";var n=i("BUAs"),r=i.n(n),s=i("9/Ou"),o=i("/GRh"),a=i("bBUv"),u=i("DVpq"),l=i("EP95");t.a=s.CompositeView.extend({template:u.a,attributes:{hiddenClass:"newsletter-sub--hidden"},modelEvents:r()({},s.CompositeView.prototype.modelEvents,{"change:email_registered":"showComplete","change:closingAnimation":"showClosingAnimation"}),subviews:{".js_email_registration_form":o.a},showComplete:function(){this.template=l.a,this.update()},closingTransitionCompleted:function(){Object(a.a)()},showClosingAnimation:function(){this.$el.addClass(this.attributes.hiddenClass).one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",this.closingTransitionCompleted)}})},DVpq:function(e,t,i){"use strict";var n=(i("rVXK"),i("QUB1")),r=function(e,t,i,n,r){var s=(e.extensions,"");return s+='\n    <form method="POST" action="',s+=i.e(null!==(void 0!==t.form_action&&null!==t.form_action?void 0!==t.form_action&&null!==t.form_action?t.form_action:"":"undefined"!=typeof form_action&&null!==form_action?form_action:"")?void 0!==t.form_action&&null!==t.form_action?void 0!==t.form_action&&null!==t.form_action?t.form_action:"":"undefined"!=typeof form_action&&null!==form_action?form_action:"":""),s+='" novalidate="novalidate" data-feature-type="footer" class="newsletter-sub__form js_email_registration_form">\n        <div class="ov-hidden">\n            <p class="newsletter-sub__badge">\n                ',s+=i.e(window.translate("exclusive_deals")),s+='\n            </p>\n            <div class="newsletter-sub__form-wrapper">\n                <label for="newsletterRegistration__newsletterEmail" class="visuallyhidden">',s+=i.e(window.translate("email_address")),s+='</label>\n                <div class="newsletter-sub__input-wrapper">\n                    <input type="email" id="newsletterRegistration__newsletterEmail"\n                           name="newsletterRegistration[newsletterEmail]"\n                           class="input newsletter-sub__input js_email_registration_input"\n                           placeholder="',s+=i.e(window.translate("email_address")),s+='"\n                           autocomplete="off"\n                           autocorrect="off"\n                           autocapitalize="none"\n                           spellcheck="false"\n                           required>\n                    <p class="error-hint create-pseudo-before create-pseudo-after is-hidden js_email_registration_error"></p>\n                </div>\n                <input type="submit" class="btn btn--secondary btn--regular input-submit newsletter-sub__submit" value="',s+=i.e(window.translate("subscribe")),s+='">\n            </div>\n\n            <input type="hidden" name="newsletterRegistration[subscriptionType]" value="organic_leads">\n            <input type="hidden" name="newsletterRegistration[subscriptionSource]" value="trivagoHotelSearch">\n        </div>\n    </form>\n',s+="\n"};t.a=function(e){return n.run(r,e)}},EP95:function(e,t,i){"use strict";var n=(i("rVXK"),i("QUB1")),r=function(e,t,i,n,r){var s=(e.extensions,"");return s+='\n    <h1 class="newsletter-sub__thanks">',s+=i.e(window.translate("thanks_for_subscribing")),s+="</h1>\n",s+="\n"};t.a=function(e){return n.run(r,e)}},NOM9:function(e,t,i){"use strict";var n=i("9/Ou"),r=i("14uT"),s=n.CompositeView.extend({events:{keydown:"onInputKeyDown",click:"onInputClicked"},modelEvents:{"change:registrationErrors":"update"},render:function(){this.$el.toggleClass("is-error",this.model.attributes.registrationErrors.length>0)},onInputKeyDown:function(){this.model.set({registrationErrors:[]}),Object(r.userInteraction)()},onInputClicked:function(){Object(r.userInteraction)()}});t.a=s},X6Vs:function(e,t,i){"use strict";var n=i("BUAs"),r=i.n(n),s=i("Sfl/"),o=i.n(s),a=i("gNpu"),u=i("14uT"),l=i("qfNC");t.a=a.a.extend({emailRegisterListener:null,defaults:r()({},a.a.prototype.defaults,{closingAnimationTimeout:5e3,form_action:o.a.generate("PriceSearchBundle_EmailMarketing_registration"),email_registered:!1,visible:!0,closingAnimation:!1,featureType:"footer"}),initialize:function(){a.a.prototype.initialize.apply(this,arguments),this.emailRegisterListener=u.emailRegistered.on(this.emailRegistered,this)},unbindEvents:function(){this.emailRegisterListener&&this.emailRegisterListener()},emailRegistered:function(){l.a.setEmailRegistered(),this.set({email_registered:!0}),this.startClosingAnimationTimeout()},hideItem:function(){this.set({visible:!1})},startClosingAnimationTimeout:function(){var e=this;setTimeout(function(){return e.set({closingAnimation:!0})},this.attributes.closingAnimationTimeout)},proceedToTrivago:function(){}})},a8M1:function(e,t,i){"use strict";function n(e){switch(e){case"idle_notification":return 4;case"overlay":return 5;case"footer":return 6;case"toast":return 7;default:return null}}t.a=n},bBUv:function(e,t,i){"use strict";i.d(t,"a",function(){return r});var n=i("9/Ou"),r=Object(n.createAction)()},gNpu:function(e,t,i){"use strict";var n=i("0efL"),r=i.n(n),s=i("9/Ou"),o=i("14uT"),a=i("qEYm"),u=(i("rVXK"),i("a8M1")),l=s.Model.extend({defaults:{registrationErrors:[],featureType:""},initialize:function(){this.bindEventHandlers()},bindEventHandlers:function(){o.proceedToTrivago.on(this.proceedToTrivago,this),o.submitRegistration.on(this.submitRegistration,this),o.removeErrorMessage.on(this.removeErrorMessages,this)},stopBinding:function(){o.proceedToTrivago.off(this.proceedToTrivago,this),o.submitRegistration.off(this.submitRegistration,this),o.removeErrorMessage.off(this.removeErrorMessages,this)},submitRegistration:function(e,t,i){var n=this;if(i=i.split(","),-1!=i.indexOf(this.get("featureType"))){var s=this.getLoggingFeatureId();return t+="&featureType="+encodeURIComponent(s),Object(a.logUseraction)("100:2252:1:289:"+s),this.set({isLoading:!0}),r.a.ajax({url:e,method:"POST",data:t}).done(function(e){e.state&&("success"===e.state?(n.set({emailRegistered:!0}),n.set({displayEmailRegistrationForm:!1}),o.emailRegistered()):n.set({registrationErrors:e.errors}))}).fail(function(){n.set({registrationErrors:[window.translate("err_1")]}),Object(a.logUseraction)("100:2252:12:289:"+s)}).always(function(){n.set({isLoading:!1})}),!1}},proceedToTrivago:function(){Object(a.logUseraction)("100:2252:2:289:"+this.getLoggingFeatureId())},removeErrorMessages:function(){this.set({registrationErrors:[]})},getLoggingFeatureId:function(){return Object(u.a)(this.get("featureType"))}});t.a=l},iwoC:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("Ct3g"),r=i("X6Vs"),s=i("bBUv"),o=i("qfNC"),a=window.app;t.default=function(){o.a.hasEmailRegistered()||a.addInitializer(function(){var e=new r.a,t=new n.a({model:e,el:"#js_footer_email_registration"});s.a.once(function(){e.unbindEvents(),t.dispose(),e=null,t=null})})}}});